<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßÆ Math AI For ‡∏Ñ‡∏£‡∏π‡∏ô‡∏∏‡πà‡∏ô</title>
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
    <!-- KaTeX ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏™‡∏ß‡∏¢‡πÜ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Marked.js ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Sarabun', sans-serif;
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3f 50%, #1a472a 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Floating Math Symbols */
        .math-symbols { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .math-symbol { position: absolute; color: rgba(255, 255, 255, 0.1); font-size: 2rem; animation: float 20s infinite ease-in-out; }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.1; }
            50% { transform: translateY(-30px) rotate(10deg); opacity: 0.2; }
        }

        .header {
            background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(10px);
            padding: 1rem; text-align: center; border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            position: relative; z-index: 10; color: white;
        }

        .chat-container {
            flex: 1; overflow-y: auto; padding: 1.5rem;
            display: flex; flex-direction: column; gap: 1rem;
            position: relative; z-index: 10;
        }

        .message {
            max-width: 85%; padding: 0.8rem 1.2rem; border-radius: 1rem;
            animation: slideUp 0.3s ease-out; line-height: 1.6;
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .message.user { align-self: flex-end; background: #4a7c59; color: white; border-bottom-right-radius: 0.2rem; }
        .message.ai { align-self: flex-start; background: white; color: #1a472a; border-bottom-left-radius: 0.2rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }

        /* ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÉ‡∏ô Chat */
        .katex-display { margin: 0.5rem 0; overflow-x: auto; overflow-y: hidden; }

        .input-area {
            background: rgba(0, 0, 0, 0.3); padding: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1); z-index: 10;
        }
        .input-wrapper { max-width: 900px; margin: 0 auto; display: flex; gap: 0.8rem; }
        input {
            flex: 1; padding: 0.8rem 1.2rem; border-radius: 2rem; border: none;
            background: rgba(255,255,255,0.15); color: white; outline: none;
        }
        button {
            padding: 0.8rem 1.5rem; border-radius: 2rem; border: none;
            background: #4a7c59; color: white; cursor: pointer; font-weight: bold;
        }
        button:disabled { opacity: 0.5; }

        .typing { display: none; color: white; font-size: 0.8rem; margin-bottom: 0.5rem; margin-left: 1.5rem; }
    </style>
</head>
<body>
    <div class="math-symbols" id="mathSymbols"></div>
    
    <header class="header">
        <h1>üßÆ Math AI For ‡∏Ñ‡∏£‡∏π‡∏ô‡∏∏‡πà‡∏ô</h1>
        <p>Expert Mathematics Solver</p>
    </header>

    <div class="chat-container" id="chatContainer">
        <div class="message ai">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠ ‡∏ô‡∏±‡∏ô‡∏ó‡∏†‡∏û ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ñ‡∏≤‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏π‡∏ï‡∏£‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</div>
    </div>

    <div class="typing" id="typingIndicator"> ‡∏Ç‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏õ‡∏õ...</div>

    <div class="input-area">
        <div class="input-wrapper">
            <input type="text" id="userInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏Å‡πâ‡∏≠‡∏™‡∏°‡∏Å‡∏≤‡∏£ 2x + 5 > 13..." autocomplete="off">
            <button id="sendBtn">‡∏™‡πà‡∏á</button>
        </div>
    </div>

    <script>
        const API_KEY = 'AIzaSyACtb1kJoH7oiZPw-NUcMCjHpW8IG0XBZ0';
        const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent';

        const chatContainer = document.getElementById('chatContainer');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const typingIndicator = document.getElementById('typingIndicator');

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå
        function renderMath(element) {
            renderMathInElement(element, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false},
                    {left: '\\(', right: '\\)', display: false},
                    {left: '\\[', right: '\\]', display: true}
                ],
                throwOnError: false
            });
        }

        async function askAI() {
            const text = userInput.value.trim();
            if (!text) return;

            // User Message
            appendMessage(text, 'user');
            userInput.value = '';
            
            // Show Typing
            typingIndicator.style.display = 'block';
            sendBtn.disabled = true;

            try {
                const response = await fetch(`${API_URL}?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: text }] }],
                        systemInstruction: {
                            parts: [{ text: "‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ä‡∏≤‡∏¢ ‡∏ï‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ ‡πÉ‡∏ä‡πâ Markdown ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏ö‡∏ö LaTeX (‡∏Ñ‡∏£‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ $ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö inline ‡∏´‡∏£‡∏∑‡∏≠ $$ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô" }]
                        }
                    })
                });

                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;
                
                appendMessage(aiText, 'ai');
            } catch (e) {
                appendMessage("‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠", 'ai');
            } finally {
                typingIndicator.style.display = 'none';
                sendBtn.disabled = false;
            }
        }

        function appendMessage(text, sender) {
            const div = document.createElement('div');
            div.className = `message ${sender}`;
            
            if (sender === 'ai') {
                // ‡πÅ‡∏õ‡∏•‡∏á Markdown ‡πÄ‡∏õ‡πá‡∏ô HTML ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå Math
                div.innerHTML = marked.parse(text);
                renderMath(div);
            } else {
                div.textContent = text;
            }
            
            chatContainer.appendChild(div);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        sendBtn.onclick = askAI;
        userInput.onkeypress = (e) => { if(e.key === 'Enter') askAI(); };

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå
        const syms = ['‚àö', 'Œ£', 'œÄ', '‚àû', '‚à´', '‚àÜ'];
        for(let i=0; i<15; i++) {
            const s = document.createElement('div');
            s.className = 'math-symbol';
            s.textContent = syms[Math.floor(Math.random()*syms.length)];
            s.style.left = Math.random()*100+'%';
            s.style.top = Math.random()*100+'%';
            s.style.animationDelay = Math.random()*5+'s';
            document.getElementById('mathSymbols').appendChild(s);
        }
    </script>
</body>
</html>
